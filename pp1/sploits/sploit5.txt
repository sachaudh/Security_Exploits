SPLOIT5:

EXPLOIT:

This part of exploit we use format stings to overwrite the value of eip.
First I have tested string "AAAABBBB%08x%08x%08x" to see how %08x reacts
 after being copied to buf. 
It took me a while to understand how %n works.
%n gets the number of chars written before it is called and stores it to a 
memory location. In this case it writes to the address where I have specified
in the beginning of args[1]. I have pointed it to eip and used %n to write the 
address to somewhere inside buf.
The reason I pointed to somewhere in buf is that, after address of eip, I have
filled args[1] with nops and shellcode after that.

[eip address][nops....][shellcode][%012582521u][%n][\0]
[  4bytes   ][      382bytes     ][  11bytes  ][2b][1b]  